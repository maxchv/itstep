DCL
===

----

Data Control Language
=====================

Data Control Language (DCL) — подмножество языка управления базами данных SQL, 
предназначенное для осуществления административных операций, присваивающих 
или отменяющих право (привилегию) использовать базу данных, таблицы и 
другие объекты базы данных, а также выполнять те или иные операторы SQL.

-    GRANT — применяется для присвоения привилегии;
-    REVOKE — применяется для отмены привилегии.

----

Создания нового пользователя
============================

.. code-block:: sql

	CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'password';

Пользователь "newuser" не имеет прав делать что-либо с базами данных. 

На самом деле, даже если если пользователь "newuser" попробует 
залогиниться (с паролем "password"), он не попадет в консоль MySQL.

Предоставление прав
===================

Таким образом, первое, что нам необходимо сделать, это предоставить 
пользователю доступ к информации, которая ему потребуется.

.. code-block:: sql
	
	GRANT ALL PRIVILEGES ON * . * TO 'newuser'@'localhost';

Звездочки в этой команде задают базу и таблицу, соответственно, 
к которым у пользователя будет доступ. 

Конкретно эта команда позволяет пользователю читать, редактировать, 
выполнять любые действия над всеми базами данных и таблицами.

Обновление прав
===============

Поле завершения настройки прав доступа новых пользователей, убедитесь, 
что вы обновили все права доступа:

.. code-block:: sql

	FLUSH PRIVILEGES;

Теперь ваши изменения вступят в силу.

----

Перечень прав
=============

Ниже представлен короткий список некоторых возможных вариантов прав доступа, 
которые могут получить пользователи:

-  ALL PRIVILEGES - это даст пользователю MySQL полный доступ к заданной базе данных (если база данных не указана, то ко всем).
-  CREATE - позволяет создавать новые таблицы или базы данных.
-  DROP - позволяет удалять таблицы или базы данных.
-  DELETE - позволяет удалять строки из таблиц.
-  INSERT - позволяет добавлять строки в таблицу.
-  SELECT - поволит использовать команду Select для чтения из баз данных.
-  UPDATE - позволит редактировать строки таблиц.
-  GRANT OPTION - позволит назначать или удалять права доступа для других пользователей.

----

Команда GRANT
=============

Для назначения прав конкретному пользователю можно использовать следующую схему:

.. code-block:: sql

	GRANT [тип прав] ON [название базы данных].[название таблицы] 
	                 TO ‘[имя пользователя]’@'localhost’;

Если вы хотите дать доступ к любой базе данных или к любой таблице, 
поставьте звездочку (*) вместо названия базы данных или таблицы.

Каждый раз, когда вы изменяете права доступа, не забудьте использовать 
команду Flush Privileges.

----

Синтаксис SET PASSWORD
======================

.. code-block:: sql

	SET PASSWORD = PASSWORD('пароль')
	SET PASSWORD FOR пользователь= PASSWORD( 'пароль')
	
Оператор SET PASSWORD назначает пароль существующей пользовательской учетной записи MySQL.

Первый синтаксис устанавливает пароль текущему пользователю. Любой клиент, 
подключенный к серверу с использованием неанонимной учетной записи, 
может изме­нять свой пароль.

Второй синтаксис присваивает пароль указанной учетной записи на текущем хосте сервера. 
Только клиенты, имеющие доступ к базе данных mysql, могут это делать. 

Зна­чение пользователь должно быть задано в формате имя_пользователя@имя_хоста, 
где имяпользователя и имя_хоста - точно такие же, которые указаны в столбцах 
User и Host таблицы mysql.user. Например, если у вас есть строка со значениями User и Host, 
равными, соответственно, 'bob' и '%.loc.gov', вы должны написать оператор следую­щим образом:

.. code-block:: sql
	
	mysql> SET PASSWORD FOR 'bob'@'%.loc.gov1 = PASSWORD('newpass');

Это эквивалентно такому варианту:

.. code-block:: sql

	mysql> UPDATE mysql.user SET Password=PASSWORD('newpass')
				WHERE User='bob' AND Host='%.loc.gov'; 
	mysql> FLUSH PRIVILEGES;
	
----

Команда REVOKE
==============

Лишения прав доступа практически идентично их назначению:

.. code-block:: sql

	REVOKE [тип прав] ON [название базы данных].[название таблицы] 
	                  FROM ‘[имя пользователя]’@‘localhost’;

----

Удаление пользователя
=====================

По аналогии с использованием команды DROP для удаления базы данных, 
вы можете использовать эту команду и для удаления пользователя.

.. code-block:: sql

	DROP USER ‘demo’@‘localhost’;

----

Консольный вход в MySQL
=======================

Для тестирования учетной записи созданного пользователя, разлогиньтесь с помощью команды:

.. code-block:: sql

	quit

и залогиньтесь снова, введя в терминате следующую команду:

.. code-block:: sql

	mysql -u [имя пользователя]-p

----

Ссылки
======

- `Как создать нового пользователя и настроить права доступа в MySQL`_

- `Операторы администрирования базы данных`_

- `Data Control Language`_

.. _Как создать нового пользователя и настроить права доступа в MySQL: https://www.digitalocean.com/community/tutorials/mysql-ru#%D0%BA%D0%B0%D0%BA-%D0%BD%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B8%D1%82%D1%8C-%D1%80%D0%B0%D0%B7%D0%BB%D0%B8%D1%87%D0%BD%D1%8B%D0%B5-%D0%BF%D1%80%D0%B0%D0%B2%D0%B0-%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0

.. _Операторы администрирования базы данных: http://www.weblibrary.biz/mysql/sintaksis-oper/oper-admin-bd

.. _Data Control Language: https://ru.wikipedia.org/wiki/Data_Control_Language
